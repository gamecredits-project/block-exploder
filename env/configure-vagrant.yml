- name: Configure the block explorer server
  hosts: 127.0.0.1
  connection: local
  roles:
    - common
    - ufw
    - supervisor
    - mongod
    - redis
    - nginx
    - application
    - compile-gamecreditsd
    - celery
    - fail2ban
    # - socket
  vars:
    - rpc_user: "1e772fd4-acaf-4a1a-9970-ff957dbf9b99"
    - rpc_password: "3ea23bcd-4312-47dc-8246-5a290dab6447"
    - rpc_port: 8332
    - regtest:
    - server_name: "blockexplorer.gamecredits.com"
    - code_dir: "/exploder"
    - log_dir: "{{ ansible_env.HOME }}/logs"
    - datadir_path: "{{ ansible_env.HOME }}/.gamecredits"
    - blocks_dir: "{{ ansible_env.HOME }}/.gamecredits/blocks"
    - exploder_conf_dir: "{{ ansible_env.HOME }}/.exploder"
    - syncer_cache_size: 1000
    - syncer_stream_sync_limit: 98
    - syncer_task_lock_timeout: 3600
    - sentry_logging: False
    - sentry_token1: ""
    - sentry_token2: ""
    - sentry_path: ""
    - bootstrap_dir: "{{ ansible_env.HOME }}/bootstrap"
    - ipify_url: "https://api.ipify.org/"
    - production: False
    - bootstrap_dir_server_path: "/bootstrap/"
    - game_price_url: "https://api.coinmarketcap.com/v1/ticker/gamecredits"
    - unspent_tracking: True
    - geo_ip_url: "https://freegeoip.net"
    - address_min_length: 26
    - address_max_length: 34
    - game_address_starts_with: ['G', '3']
    - sha256_hash_length: 64
    - application_port: 80
    - fail2ban_maxretry: 600
    - fail2ban_findtime: 60
    - fail2ban_bantime: 600
    - exploder_ui_dir: "/home/vagrant/block-exploder-ui/dist"
    - ssl_certificate: "/home/gameadmin/certs/blockexplorer.gamecredits.com.chained.crt"
    - ssl_certificate_key: "/home/gameadmin/certs/blockexplorer.gamecredits.com.key"
    - https: False
    - with_ui: True
    - mongo_user: mongouser
    - mongo_pass: mongopass
    
